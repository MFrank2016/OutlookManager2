# ğŸš€ APIæµ‹è¯•åŠŸèƒ½è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

å·²ä¸ºæ‰€æœ‰15ä¸ªAPIç«¯ç‚¹æ·»åŠ äº†**è¯•ç”¨æ¥å£**åŠŸèƒ½ï¼Œæ”¯æŒåœ¨æµè§ˆå™¨ä¸­ç›´æ¥æµ‹è¯•APIï¼Œæ— éœ€é¢å¤–å·¥å…·ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### 1. **å®Œæ•´çš„APIæµ‹è¯•æ”¯æŒ**
- âœ… æ”¯æŒæ‰€æœ‰HTTPæ–¹æ³•ï¼ˆGETã€POSTã€DELETEï¼‰
- âœ… æ”¯æŒè·¯å¾„å‚æ•°ç¼–è¾‘
- âœ… æ”¯æŒæŸ¥è¯¢å‚æ•°ç¼–è¾‘
- âœ… æ”¯æŒè¯·æ±‚ä½“JSONç¼–è¾‘
- âœ… è‡ªåŠ¨JWT Tokenè®¤è¯
- âœ… å®æ—¶å“åº”å±•ç¤º

### 2. **å‚æ•°ç¼–è¾‘èƒ½åŠ›**
- ğŸ“ **è·¯å¾„å‚æ•°** - å¯ç¼–è¾‘æ–‡æœ¬æ¡†ï¼ˆå¦‚ï¼šemail_idã€table_nameï¼‰
- ğŸ” **æŸ¥è¯¢å‚æ•°** - æ ¹æ®ç±»å‹è‡ªåŠ¨é€‰æ‹©è¾“å…¥æ¡†ï¼š
  - æ–‡æœ¬å‚æ•°ï¼šæ–‡æœ¬è¾“å…¥æ¡†
  - æ•°å­—å‚æ•°ï¼šæ•°å­—è¾“å…¥æ¡†
  - å¸ƒå°”å‚æ•°ï¼šå¤é€‰æ¡†
- ğŸ“„ **è¯·æ±‚ä½“** - JSONç¼–è¾‘å™¨ï¼ˆè‡ªåŠ¨æ ¼å¼åŒ–ï¼‰

### 3. **æ™ºèƒ½è®¤è¯å¤„ç†**
- ğŸ” éœ€è¦JWTçš„æ¥å£ï¼šè‡ªåŠ¨æºå¸¦Token
- ğŸŒ æ— éœ€è®¤è¯çš„æ¥å£ï¼šç›´æ¥è¯·æ±‚
- â±ï¸ Tokenè¿‡æœŸè‡ªåŠ¨æç¤º

### 4. **å‹å¥½çš„äº¤äº’ç•Œé¢**
- ğŸ¨ ç¾è§‚çš„æ¨¡æ€æ¡†è®¾è®¡
- ğŸ“Š å®æ—¶å“åº”ç»“æœå±•ç¤ºï¼ˆJSONæ ¼å¼åŒ–ï¼‰
- âœ… æˆåŠŸ/é”™è¯¯çŠ¶æ€åŒºåˆ†ï¼ˆç»¿è‰²/çº¢è‰²ï¼‰
- ğŸ”„ ä¸€é”®é‡ç½®è¡¨å•
- ğŸ“‹ å“åº”ç»“æœæ”¯æŒå¤åˆ¶

## ğŸ“‹ æ”¯æŒçš„APIåˆ—è¡¨

### ğŸ” è®¤è¯ç®¡ç†ï¼ˆ3ä¸ªï¼‰

| ç«¯ç‚¹ | æ–¹æ³• | é…ç½®Key | å¯ç¼–è¾‘å‚æ•° |
|------|------|---------|------------|
| `/auth/login` | POST | `login` | è¯·æ±‚ä½“ï¼ˆusername, passwordï¼‰ |
| `/auth/me` | GET | `me` | æ—  |
| `/auth/change-password` | POST | `changePassword` | è¯·æ±‚ä½“ï¼ˆold_password, new_passwordï¼‰ |

### ğŸ‘¥ è´¦æˆ·ç®¡ç†ï¼ˆ4ä¸ªï¼‰

| ç«¯ç‚¹ | æ–¹æ³• | é…ç½®Key | å¯ç¼–è¾‘å‚æ•° |
|------|------|---------|------------|
| `/accounts` | GET | `accounts` | æŸ¥è¯¢å‚æ•°ï¼ˆpage, page_size, email_search, tag_searchï¼‰ |
| `/accounts` | POST | `addAccount` | è¯·æ±‚ä½“ï¼ˆemail_id, refresh_token, client_id, tagsï¼‰ |
| `/accounts/{email_id}` | DELETE | `deleteAccount` | è·¯å¾„å‚æ•°ï¼ˆemail_idï¼‰ |
| `/accounts/{email_id}/refresh-token` | POST | `refreshToken` | è·¯å¾„å‚æ•°ï¼ˆemail_idï¼‰ |

### ğŸ“§ é‚®ä»¶ç®¡ç†ï¼ˆ2ä¸ªï¼‰

| ç«¯ç‚¹ | æ–¹æ³• | é…ç½®Key | å¯ç¼–è¾‘å‚æ•° |
|------|------|---------|------------|
| `/emails/{email_id}` | GET | `emails` | è·¯å¾„å‚æ•°ï¼ˆemail_idï¼‰<br>æŸ¥è¯¢å‚æ•°ï¼ˆfolder, page, page_size, refreshï¼‰ |
| `/emails/{email_id}/{message_id}` | GET | `emailDetail` | è·¯å¾„å‚æ•°ï¼ˆemail_id, message_idï¼‰ |

### âš™ï¸ ç®¡ç†é¢æ¿ï¼ˆ5ä¸ªï¼‰

| ç«¯ç‚¹ | æ–¹æ³• | é…ç½®Key | å¯ç¼–è¾‘å‚æ•° |
|------|------|---------|------------|
| `/admin/tables/{table_name}/count` | GET | `tableCount` | è·¯å¾„å‚æ•°ï¼ˆtable_nameï¼‰ |
| `/admin/tables/{table_name}` | GET | `tableData` | è·¯å¾„å‚æ•°ï¼ˆtable_nameï¼‰ |
| `/admin/tables/{table_name}/{record_id}` | DELETE | `deleteTableRecord` | è·¯å¾„å‚æ•°ï¼ˆtable_name, record_idï¼‰ |
| `/admin/config` | GET | `getConfig` | æ—  |
| `/admin/config` | POST | `updateConfig` | è¯·æ±‚ä½“ï¼ˆkey, value, descriptionï¼‰ |

### ğŸ“Š ç³»ç»Ÿä¿¡æ¯ï¼ˆ1ä¸ªï¼‰

| ç«¯ç‚¹ | æ–¹æ³• | é…ç½®Key | å¯ç¼–è¾‘å‚æ•° |
|------|------|---------|------------|
| `/api` | GET | `systemInfo` | æ—  |

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### 1. **è®¿é—®APIæ–‡æ¡£é¡µé¢**
```
http://localhost:8001
â†’ ç‚¹å‡»å·¦ä¾§ "ğŸ“– APIç®¡ç†" èœå•
```

### 2. **æµ‹è¯•API**
1. æ‰¾åˆ°è¦æµ‹è¯•çš„APIç«¯ç‚¹
2. ç‚¹å‡»å³ä¾§çš„ **ğŸš€ è¯•ç”¨æ¥å£** æŒ‰é’®
3. åœ¨å¼¹å‡ºçš„æµ‹è¯•çª—å£ä¸­ï¼š
   - æŸ¥çœ‹/ç¼–è¾‘è·¯å¾„å‚æ•°
   - æŸ¥çœ‹/ç¼–è¾‘æŸ¥è¯¢å‚æ•°
   - ç¼–è¾‘JSONè¯·æ±‚ä½“ï¼ˆå¦‚é€‚ç”¨ï¼‰
4. ç‚¹å‡» **â–¶ï¸ å‘é€è¯·æ±‚** æŒ‰é’®
5. æŸ¥çœ‹å“åº”ç»“æœ

### 3. **å‚æ•°ç¼–è¾‘ç¤ºä¾‹**

#### ç¤ºä¾‹1ï¼šæµ‹è¯•è·å–è´¦æˆ·åˆ—è¡¨
```javascript
// ç‚¹å‡» "GET /accounts" çš„ "è¯•ç”¨æ¥å£" æŒ‰é’®
// ç¼–è¾‘æŸ¥è¯¢å‚æ•°ï¼š
page: 1
page_size: 20
email_search: outlook.com
tag_search: å·¥ä½œ

// ç‚¹å‡» "å‘é€è¯·æ±‚" æŸ¥çœ‹ç»“æœ
```

#### ç¤ºä¾‹2ï¼šæµ‹è¯•æ·»åŠ è´¦æˆ·
```javascript
// ç‚¹å‡» "POST /accounts" çš„ "è¯•ç”¨æ¥å£" æŒ‰é’®
// ç¼–è¾‘è¯·æ±‚ä½“ï¼š
{
  "email_id": "test@outlook.com",
  "refresh_token": "your_refresh_token_here",
  "client_id": "your_client_id_here",
  "tags": ["æµ‹è¯•", "ä¸ªäºº"]
}

// ç‚¹å‡» "å‘é€è¯·æ±‚" æŸ¥çœ‹ç»“æœ
```

#### ç¤ºä¾‹3ï¼šæµ‹è¯•åˆ é™¤è´¦æˆ·
```javascript
// ç‚¹å‡» "DELETE /accounts/{email_id}" çš„ "è¯•ç”¨æ¥å£" æŒ‰é’®
// ç¼–è¾‘è·¯å¾„å‚æ•°ï¼š
email_id: test@outlook.com

// ç‚¹å‡» "å‘é€è¯·æ±‚" æŸ¥çœ‹ç»“æœ
```

#### ç¤ºä¾‹4ï¼šæµ‹è¯•ç®¡ç†å‘˜ç™»å½•ï¼ˆæ— éœ€Tokenï¼‰
```javascript
// ç‚¹å‡» "POST /auth/login" çš„ "è¯•ç”¨æ¥å£" æŒ‰é’®
// ç¼–è¾‘è¯·æ±‚ä½“ï¼š
{
  "username": "admin",
  "password": "admin123"
}

// ç‚¹å‡» "å‘é€è¯·æ±‚" è·å–Token
```

## ğŸ’¡ é«˜çº§åŠŸèƒ½

### 1. **é‡ç½®è¡¨å•**
ç‚¹å‡» **ğŸ”„ é‡ç½®** æŒ‰é’®æ¢å¤é»˜è®¤å‚æ•°å€¼

### 2. **JSONæ ¼å¼éªŒè¯**
- è¯·æ±‚ä½“JSONæ ¼å¼é”™è¯¯ä¼šè‡ªåŠ¨æç¤º
- è‡ªåŠ¨ç¾åŒ–JSONæ˜¾ç¤ºï¼ˆ2ç©ºæ ¼ç¼©è¿›ï¼‰

### 3. **å“åº”çŠ¶æ€è¯†åˆ«**
- âœ… **æˆåŠŸå“åº”** - ç»¿è‰²èƒŒæ™¯ï¼ŒJSONæ ¼å¼åŒ–æ˜¾ç¤º
- âŒ **é”™è¯¯å“åº”** - çº¢è‰²èƒŒæ™¯ï¼Œé”™è¯¯ä¿¡æ¯æ˜¾ç¤º

### 4. **å¿«æ·é”®æ”¯æŒ**ï¼ˆå¾…å®ç°ï¼‰
- `Ctrl+Enter` - å‘é€è¯·æ±‚
- `Esc` - å…³é—­æµ‹è¯•çª—å£

## ğŸ”§ æŠ€æœ¯å®ç°

### APIé…ç½®å¯¹è±¡
```javascript
const API_CONFIGS = {
    'apiKey': {
        method: 'GET|POST|DELETE',
        endpoint: '/api/path/{param}',
        path: { param: 'default_value' },      // è·¯å¾„å‚æ•°
        query: { key: 'value' },               // æŸ¥è¯¢å‚æ•°
        body: { key: 'value' },                // è¯·æ±‚ä½“
        requiresAuth: true|false               // æ˜¯å¦éœ€è¦JWT
    }
}
```

### å‚æ•°ç±»å‹è¯†åˆ«
```javascript
// è‡ªåŠ¨æ ¹æ®å‚æ•°ç±»å‹é€‰æ‹©è¾“å…¥æ§ä»¶
typeof value === 'boolean' â†’ checkbox
typeof value === 'number'  â†’ number input
typeof value === 'string'  â†’ text input
Array/Object              â†’ JSON textarea
```

### JWTè‡ªåŠ¨å¤„ç†
```javascript
if (config.requiresAuth) {
    // ä½¿ç”¨ç°æœ‰çš„ apiRequest() å‡½æ•°ï¼Œè‡ªåŠ¨æºå¸¦Token
    response = await apiRequest(url, options);
} else {
    // æ— éœ€è®¤è¯ï¼Œç›´æ¥fetch
    response = await fetch(API_BASE + url, options);
}
```

## ğŸ“± ç•Œé¢æˆªå›¾ï¼ˆæè¿°ï¼‰

### æµ‹è¯•çª—å£å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸš€ æµ‹è¯•API: /accounts                 Ã— â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯·æ±‚ä¿¡æ¯                                 â”‚
â”‚ æ–¹æ³•: GET                                â”‚
â”‚ ç«¯ç‚¹: /accounts                          â”‚
â”‚                                          â”‚
â”‚ æŸ¥è¯¢å‚æ•° â–¼                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚ â”‚ page          [1  ]â”‚                  â”‚
â”‚ â”‚ page_size     [10 ]â”‚                  â”‚
â”‚ â”‚ email_search  [   ]â”‚                  â”‚
â”‚ â”‚ tag_search    [   ]â”‚                  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                          â”‚
â”‚ å“åº”ç»“æœ â–¼                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ {                                  â”‚  â”‚
â”‚ â”‚   "total_accounts": 25,            â”‚  â”‚
â”‚ â”‚   "accounts": [...]                â”‚  â”‚
â”‚ â”‚ }                                  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚
â”‚ [â–¶ï¸ å‘é€è¯·æ±‚] [ğŸ”„ é‡ç½®] [âœ–ï¸ å…³é—­]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸŒŸ ä¼˜åŠ¿

### å¯¹æ¯”Postman/cURL
- âœ… æ— éœ€å®‰è£…é¢å¤–å·¥å…·
- âœ… è‡ªåŠ¨é›†æˆJWTè®¤è¯
- âœ… å‚æ•°é»˜è®¤å€¼é¢„å¡«å……
- âœ… å“åº”å®æ—¶å±•ç¤º
- âœ… ä¸æ–‡æ¡£æ— ç¼é›†æˆ

### å¯¹æ¯”Swagger UI
- âœ… æ›´ç°ä»£çš„UIè®¾è®¡
- âœ… ä¸­æ–‡ç•Œé¢
- âœ… è‡ªå®šä¹‰å‚æ•°é»˜è®¤å€¼
- âœ… è½»é‡çº§å®ç°

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. **æŸ¥çœ‹è¯·æ±‚è¯¦æƒ…**
æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰â†’ Networkæ ‡ç­¾ï¼ŒæŸ¥çœ‹å®é™…å‘é€çš„è¯·æ±‚

### 2. **Tokenè¿‡æœŸå¤„ç†**
å¦‚æœæ”¶åˆ°401é”™è¯¯ï¼š
1. é‡æ–°è®¿é—®ç™»å½•é¡µé¢ï¼š`/static/login.html`
2. ä½¿ç”¨`admin`/`admin123`ç™»å½•
3. è¿”å›ç»§ç»­æµ‹è¯•

### 3. **JSONæ ¼å¼é”™è¯¯**
è¯·æ±‚ä½“å¿…é¡»æ˜¯æœ‰æ•ˆçš„JSONï¼š
```json
âŒ é”™è¯¯: { key: value }
âœ… æ­£ç¡®: { "key": "value" }
```

## ğŸ“Š ç»Ÿè®¡ä¿¡æ¯

- **æ€»APIç«¯ç‚¹æ•°**ï¼š15ä¸ª
- **æ”¯æŒè¯•ç”¨çš„ç«¯ç‚¹**ï¼š15ä¸ªï¼ˆ100%ï¼‰
- **å¯ç¼–è¾‘å‚æ•°ç±»å‹**ï¼šè·¯å¾„å‚æ•°ã€æŸ¥è¯¢å‚æ•°ã€è¯·æ±‚ä½“
- **HTTPæ–¹æ³•æ”¯æŒ**ï¼šGETã€POSTã€DELETE
- **è®¤è¯æ–¹å¼**ï¼šJWT Tokenï¼ˆè‡ªåŠ¨ï¼‰

## ğŸš€ æœªæ¥å¢å¼º

- [ ] æ·»åŠ è¯·æ±‚å†å²è®°å½•
- [ ] æ”¯æŒæ‰¹é‡æµ‹è¯•
- [ ] å¯¼å‡ºä¸ºcURLå‘½ä»¤
- [ ] å¯¼å‡ºä¸ºPostman Collection
- [ ] è¯·æ±‚/å“åº”æ—¶é—´ç»Ÿè®¡
- [ ] å¿«æ·é”®æ”¯æŒ
- [ ] å“åº”ç»“æœè¯­æ³•é«˜äº®
- [ ] å‚æ•°è‡ªåŠ¨å®Œæˆ

---

ğŸ“… **åˆ›å»ºæ—¥æœŸ**ï¼š2025-10-29  
ğŸ”– **ç‰ˆæœ¬**ï¼šv2.0.0  
ğŸ‘¨â€ğŸ’» **ä½œè€…**ï¼šAI Assistant

